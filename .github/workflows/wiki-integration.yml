name: ðŸ“– Wiki Integration

on:
  push:
    branches: [ main ]
    paths:
      - 'docs/wiki-integration-guide.md'
      - 'docs/_sidebar.md'
      - 'docs/_navbar.md'
      - '.github/workflows/wiki-integration.yml'
  workflow_dispatch:

permissions:
  contents: read

jobs:
  wiki-sync:
    runs-on: ubuntu-latest
    
    steps:
    - name: ðŸ“¥ Checkout repository
      uses: actions/checkout@v4

    - name: ðŸ“– Wiki Integration Summary
      run: |
        echo "ðŸš€ Wiki Integration Status"
        echo "========================="
        echo ""
        echo "ðŸ“š Primary Documentation: https://alteriom.github.io/EByte_LoRa_E220_Series_Library/"
        echo "ðŸ“– Community Wiki: https://github.com/Alteriom/EByte_LoRa_E220_Series_Library/wiki"
        echo ""
        echo "ðŸ“‹ Integration Strategy:"
        echo "  âœ… Modern documentation serves as primary resource"
        echo "  âœ… Wiki provides community-driven supplements"
        echo "  âœ… Clear cross-referencing between systems"
        echo "  âœ… Consistent user experience"
        echo ""
        echo "ðŸ”— Key Features:"
        echo "  ðŸ“± Mobile-friendly modern docs"
        echo "  ðŸ” Live search functionality"
        echo "  ðŸ¤ Community wiki contributions"
        echo "  ðŸ“š Comprehensive cross-linking"
        echo ""
        echo "ðŸ“Š Documentation Files:"
        echo "  ðŸ“„ Main docs: $(find docs -name "*.md" | wc -l) files"
        echo "  ðŸ”§ Integration guide: docs/wiki-integration-guide.md"
        echo "  ðŸ“‹ Wiki templates: Available in integration guide"
        echo ""
        
    - name: ðŸ” Validate Wiki Integration
      run: |
        echo "ðŸ” Validating wiki integration setup..."
        
        # Check if wiki integration guide exists
        if [ -f "docs/wiki-integration-guide.md" ]; then
          echo "âœ… Wiki integration guide found"
        else
          echo "âŒ Missing wiki integration guide"
          exit 1
        fi
        
        # Check for wiki references in main README
        if grep -q "wiki" README.md; then
          echo "âœ… Wiki references found in README"
        else
          echo "âš ï¸ No wiki references in README"
        fi
        
        # Check documentation links
        if grep -q "alteriom.github.io" README.md; then
          echo "âœ… Modern documentation links found"
        else
          echo "âŒ Missing modern documentation links"
          exit 1
        fi
        
    - name: ðŸ“ Generate Wiki Templates
      run: |
        echo "ðŸ“ Generating wiki page templates..."
        
        mkdir -p wiki-templates
        
        # Create Home page template
        cat > wiki-templates/Home.md << 'EOF'
        # Welcome to the Alteriom EByte LoRa E220 Wiki! ðŸš€

        ## ðŸ“š **[VISIT OUR MODERN DOCUMENTATION â†’](https://alteriom.github.io/EByte_LoRa_E220_Series_Library/)**

        **Our main documentation features:**
        - ðŸ“± Mobile-friendly responsive design
        - ðŸ” Live search functionality  
        - ðŸ’» Copy-paste Arduino examples
        - ðŸŽ¯ Platform-specific guides
        - âš¡ 5-minute quick start

        ---

        ## ðŸ¤ Community Contributions

        This wiki contains community-driven content that supplements our main documentation:

        ### ðŸ“‹ Wiki Sections

        - **[Community Guides](Community-Guides)** - User-contributed tutorials and tips
        - **[Troubleshooting FAQ](Community-FAQ)** - Community Q&A
        - **[Hardware Variants](Hardware-Variants)** - Different E220 module variations
        - **[Regional Setup](Regional-Setup)** - Country-specific configuration guides

        ### ðŸš€ Quick Links to Main Documentation

        | Resource | Link |
        |----------|------|
        | ðŸ  **Main Docs** | [ðŸ“š Live Documentation](https://alteriom.github.io/EByte_LoRa_E220_Series_Library/) |
        | âš¡ **Quick Start** | [ðŸš€ 5-Minute Setup](https://alteriom.github.io/EByte_LoRa_E220_Series_Library/quickstart) |
        | ðŸ“– **API Reference** | [ðŸ”§ Complete API](https://alteriom.github.io/EByte_LoRa_E220_Series_Library/api-reference) |
        | ðŸ’» **Examples** | [ðŸ“‹ Arduino Code](https://alteriom.github.io/EByte_LoRa_E220_Series_Library/examples) |
        | âš™ï¸ **Configuration** | [ðŸ”§ Device Setup](https://alteriom.github.io/EByte_LoRa_E220_Series_Library/configuration) |

        ---

        ## ðŸ¤ Contributing to the Wiki

        1. **Check main docs first** - Ensure content isn't already covered
        2. **Focus on community content** - Share unique insights, projects, tips
        3. **Follow guidelines** - Keep consistent with project style
        4. **Link to main docs** - Reference official documentation when relevant

        ## ðŸ“ž Need Help?

        - **ðŸ“š Check main docs**: [alteriom.github.io/EByte_LoRa_E220_Series_Library/](https://alteriom.github.io/EByte_LoRa_E220_Series_Library/)
        - **ðŸ› Report issues**: [GitHub Issues](https://github.com/Alteriom/EByte_LoRa_E220_Series_Library/issues)
        - **ðŸ’¬ Community discussions**: [GitHub Discussions](https://github.com/Alteriom/EByte_LoRa_E220_Series_Library/discussions)
        EOF
        
        # Create Community Guides template
        cat > wiki-templates/Community-Guides.md << 'EOF'
        # Community Guides

        User-contributed guides and tutorials that supplement the official documentation.

        ## ðŸ“‹ Available Guides

        ### ðŸ—ï¸ Project Tutorials
        - **LoRa Weather Station** - Complete weather monitoring system
        - **Remote Sensor Network** - Multi-node sensor deployment
        - **LoRa GPS Tracker** - Location tracking with E220 modules

        ### ðŸ”§ Advanced Configuration
        - **Custom Antenna Designs** - Improving range with DIY antennas  
        - **Mesh Networking** - Creating LoRa mesh networks
        - **Power Optimization** - Battery life optimization techniques

        ### ðŸŒ Regional Setups
        - **European Deployment** - EU frequency regulations and setup
        - **US Deployment** - FCC compliance and configuration
        - **Asian Markets** - Region-specific considerations

        ## ðŸ¤ Contributing a Guide

        1. **Create a new wiki page**
        2. **Follow the template below**
        3. **Link back to official docs**
        4. **Update this index page**

        ### Guide Template

        ```markdown
        # Guide Title

        ## Overview
        Brief description of what this guide covers.

        ## Prerequisites
        - Link to [official setup guide](https://alteriom.github.io/EByte_LoRa_E220_Series_Library/quickstart)
        - Required hardware/software

        ## Step-by-Step Instructions
        Detailed instructions with code examples.

        ## Troubleshooting
        Common issues specific to this guide.

        ## Related Documentation
        - [Official API Reference](https://alteriom.github.io/EByte_LoRa_E220_Series_Library/api-reference)
        - Other relevant wiki pages
        ```

        ## ðŸ“š Official Documentation

        For complete documentation, visit: [ðŸ“š Modern Documentation Site](https://alteriom.github.io/EByte_LoRa_E220_Series_Library/)
        EOF
        
        echo "âœ… Wiki templates generated in wiki-templates/ directory"
        
    - name: ðŸ“Š Wiki Integration Report
      run: |
        echo "ðŸ“Š Wiki Integration Report"
        echo "========================="
        echo ""
        echo "âœ… **Integration Complete!**"
        echo ""
        echo "ðŸŽ¯ **What's Ready:**"
        echo "  ðŸ“š Modern documentation system deployed"
        echo "  ðŸ“– Wiki integration guide created"
        echo "  ðŸ“ Wiki page templates generated"
        echo "  ðŸ”— Cross-references established"
        echo "  ðŸ“± Mobile-friendly experience"
        echo ""
        echo "ðŸš€ **Next Steps:**"
        echo "  1. Copy templates from wiki-templates/ to GitHub Wiki"
        echo "  2. Configure wiki sidebar with provided navigation"
        echo "  3. Promote community contributions to wiki"
        echo "  4. Monitor and maintain both documentation systems"
        echo ""
        echo "ðŸ“ˆ **Benefits:**"
        echo "  âœ… Professional modern documentation"
        echo "  âœ… Community-driven wiki content"
        echo "  âœ… Clear hierarchy and navigation"
        echo "  âœ… Consistent user experience"
        echo "  âœ… Reduced maintenance overhead"
        echo ""
        echo "ðŸ”— **Access Points:**"
        echo "  ðŸ“š Main Docs: https://alteriom.github.io/EByte_LoRa_E220_Series_Library/"
        echo "  ðŸ“– Wiki: https://github.com/Alteriom/EByte_LoRa_E220_Series_Library/wiki"
        echo "  ðŸ“‹ Templates: Available in build artifacts"
        echo ""
        
    - name: ðŸ“¦ Archive Wiki Templates
      uses: actions/upload-artifact@v6
      with:
        name: wiki-templates
        path: wiki-templates/
        retention-days: 90

    - name: ðŸŽ‰ Success Summary
      run: |
        echo "ðŸŽ‰ Wiki Integration Workflow Complete!"
        echo ""
        echo "Your documentation system is now ready with:"
        echo ""
        echo "ðŸ“š **Modern Documentation**"
        echo "  âœ… Beautiful responsive design"
        echo "  âœ… Live search functionality"
        echo "  âœ… Interactive examples"
        echo "  âœ… Mobile optimization"
        echo ""
        echo "ðŸ“– **Community Wiki**"
        echo "  âœ… Ready-to-use templates"
        echo "  âœ… Clear integration strategy"
        echo "  âœ… Community contribution guidelines"
        echo "  âœ… Cross-reference system"
        echo ""
        echo "ðŸ”— **Perfect Integration**"
        echo "  ðŸ“± Users get modern docs by default"
        echo "  ðŸ¤ Community can contribute via wiki"
        echo "  ðŸ“š Both systems work together seamlessly"
        echo "  âš¡ Maintenance is streamlined"
        echo ""
        echo "Ready to serve your users! ðŸš€"